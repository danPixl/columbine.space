/*!
* XING
*
* @author Stefan Keim (indus)
* @version 0.1.1
* @description canvas based line background
*
*/
(function(){for(var i=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();"use static";var XING=function(){function n(t,i){function ht(n,t){return n[1]-t[1]}function ct(n){at=!0;k.x=n.pageX/(window.innerWidth/2)-1;k.y=n.pageY/(window.innerHeight/2)-1}function st(){rt=v.width=(window.innerWidth||v.offsetWidth)/2;ut=v.height=(window.innerHeight||v.offsetHeight)/2;c.fillStyle=i.bkgdColor;c.strokeStyle=i.lineColor;c.lineCap="round"}var v,d,r,u,f,e,o,s,l,lt,g,ft,b,nt,tt,y,h,ot,it,at;if(i===void 0&&(i={}),this.options=i,v=typeof t=="string"||t instanceof String?document.getElementById(t):t,v.tagName!="CANVAS")throw"no canvas";for(d in n.options)i[d]=i[d]===undefined?n.options[d]:i[d];var c=v.getContext("2d",{alpha:!i.bkgdColor}),k={x:0,y:0},et,p,rt,ut,a=Math.random,w=0;for(s=[],ot=function ot(n){for(i.bkgdColor?c.fillRect(0,0,rt,ut):c.clearRect(0,0,rt,ut),w=n-w||16,y=p;y;y--){for(r=et[y-1],u=r.x1,f=r.y1,e=r.x2,o=r.y2,i.parallax&&(g=i.parallax/y,u+=k.x*g,e+=k.x*g,f+=k.y*g,o+=k.y*g),r.m=(f-o)/(u-e),r.b=f-r.m*u,u=r.x1+=r.vx1*w,f=r.y1+=r.vx1*w,e=r.x2+=r.vx2*w,o=r.y2+=r.vy2*w,(u<0||u>1)&&(r.vx1=-r.vx1),(f<0||f>1)&&(r.vy1=-r.vy1),(e<0||e>1)&&(r.vx2=-r.vx2),(o<0||o>1)&&(r.vy2=-r.vy2),u=Math.min(Math.max((+(r.m<0)-r.b)/r.m,0),1),f=r.m*u+r.b,e=Math.min(Math.max((+(r.m>0)-r.b)/r.m,0),1),o=r.m*e+r.b,s[s.length=0]=[0,u,f],lt=Math.sqrt((e-u)*(e-u)+(o-f)*(o-f)),h=y;h<p;h++)ft=et[h],b=(ft.b-r.b)/(r.m-ft.m),nt=r.m*b+r.b,b>0&&b<1&&nt>0&&nt<1&&(tt=.01/Math.abs(Math.atan(r.m)-Math.atan(ft.m))+.01,s[s.push([1,b-tt*(e-u),nt-tt*(o-f)])]=[0,b+tt*(e-u),nt+tt*(o-f)]);for(s.push([1,e,o]),s.sort(ht),c.beginPath(),h=0;h<s.length&&(l=s[h]);h++)h&&l[0]&&s[h-1][0]==l[0]||(l[0]?c.lineTo(l[1]*rt,l[2]*ut):c.moveTo(l[1]*rt,l[2]*ut));c.lineWidth=y*.2+.4;c.stroke()}w=n;requestAnimationFrame(ot)},et=[],p=1;p++<Math.max(i.lineNum,2);)it=i.velocity*p/1e5,p=et.push({x1:a(),y1:a(),x2:a(),y2:a(),vx1:a()*it,vy1:a()*it,vx2:a()*it,vy2:a()*it});p--;window.addEventListener("resize",st,!1);document.addEventListener("mousemove",ct,!1);st();ot(0)}return n.options={velocity:1,parallax:.1,lineNum:8,bkgdColor:"#55acee",lineColor:"rgba(255,255,255,.15)"},n}();new XING("xing");